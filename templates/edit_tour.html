{% extends "layout.html" %}

{% block title %}
    Edit Tour: {{ tour.name if tour.name is not none else 'N/A' }}
{% endblock %}

{% block main %}
    <h2>Edit Tour</h2>
    {# The form action should point to the edit_tour route for this specific tour ID #}
    <form action="{{ url_for('edit_tour', tour_id=tour.id) }}" method="post">
        {# Include a hidden input for the tour ID #}
        <input type="hidden" name="tour_id" value="{{ tour.id }}">

        <div class="mb-3">
            <label for="name" class="form-label">Tour Name</label>
            {# Pre-populate the input field with the tour's current name #}
            <input autocomplete="off" autofocus class="form-control mx-auto w-auto" id="name" name="name" placeholder="Tour Name" type="text" value="{{ tour.name if tour.name is not none else '' }}" required>
        </div>
        <div class="mb-3">
            <label for="location" class="form-label">Location</label>
             {# Pre-populate the input field with the tour's current location #}
            <input class="form-control mx-auto w-auto" id="location" name="location" placeholder="Location" type="text" value="{{ tour.location if tour.location is not none else '' }}" required>
        </div>
         <div class="mb-3">
            <label for="description" class="form-label">Description</label>
             {# Pre-populate the textarea with the tour's current description #}
            <textarea class="form-control mx-auto w-auto" id="description" name="description" placeholder="Description" rows="3">{{ tour.description if tour.description is not none else '' }}</textarea>
        </div>
        <div class="mb-3">
            <label for="date" class="form-label">Date</label>
             {# Pre-populate the date input with the tour's current date #}
            <input class="form-control mx-auto w-auto" id="date" name="date" type="date" value="{{ tour.date if tour.date is not none else '' }}" required>
        </div>
        <div class="mb-3">
            <label for="time" class="form-label">Time</label>
             {# Pre-populate the time input with the tour's current time #}
            <input class="form-control mx-auto w-auto" id="time" name="time" type="time" value="{{ tour.time if tour.time is not none else '' }}" required>
        </div>
         <div class="mb-3">
            <label for="duration" class="form-label">Duration (e.g., 3 hours)</label>
             {# Pre-populate the input field with the tour's current duration #}
            <input class="form-control mx-auto w-auto" id="duration" name="duration" placeholder="Duration" type="text" value="{{ tour.duration if tour.duration is not none else '' }}">
        </div>
        <div class="mb-3">
            <label for="price" class="form-label">Price</label>
             {# Pre-populate the input field with the tour's current price #}
            <input class="form-control mx-auto w-auto" id="price" name="price" placeholder="Price" type="number" step="0.01" value="{{ tour.price if tour.price is not none else '' }}" required>
        </div>
        <div class="mb-3">
            <label for="max_capacity" class="form-label">Max Capacity</label>
             {# Pre-populate the input field with the tour's current max capacity #}
            <input class="form-control mx-auto w-auto" id="max_capacity" name="max_capacity" placeholder="Max Capacity" type="number" min="1" value="{{ tour.max_capacity if tour.max_capacity is not none else '' }}" required>
        </div>
        {# You might want to include the Status field here for editing as well, depending on your workflow #}
        {#
        <div class="mb-3">
             <label for="status" class="form-label">Status</label>
             <select class="form-select mx-auto w-auto" id="status" name="status" required>
                 <option value="Scheduled" {% if tour.status == 'Scheduled' %}selected{% endif %}>Scheduled</option>
                 <option value="Confirmed" {% if tour.status == 'Confirmed' %}selected{% endif %}>Confirmed</option>
                 <option value="Cancelled" {% if tour.status == 'Cancelled' %}selected{% endif %}>Cancelled</option>
                 <option value="Completed" {% if tour.status == 'Completed' %}selected{% endif %}>Completed</option>
                 <option value="Archived" {% if tour.status == 'Archived' %}selected{% endif %}>Archived</option>
             </select>
        </div>
        #}
        <button class="btn btn-primary" type="submit">Update Tour</button>
         {# Optional: Add a Cancel button to go back #}
        <a href="{{ url_for('employee_tasks') }}" class="btn btn-secondary">Cancel</a>
    </form>
{% endblock %}